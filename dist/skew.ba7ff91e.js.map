{"version":3,"sources":["js/skew.js"],"names":["proxy","skew","skewSetter","gsap","quickSetter","clamp","utils","ScrollTrigger","create","onUpdate","self","getVelocity","Math","abs","to","duration","ease","overwrite","set","transformOrigin","force3D","document","querySelector","currentPixel","window","pageYOffset","looper","newPixel","diff","speed","final","style","transform","requestAnimationFrame"],"mappings":"AAAA,IAAIA,KAAK,GAAG;AAAEC,EAAAA,IAAI,EAAE;AAAR,CAAZ;AAAA,IACIC,UAAU,GAAGC,IAAI,CAACC,WAAL,CAAiB,OAAjB,EAA0B,OAA1B,EAAmC,KAAnC,CADjB;AAAA,IAC4D;AACxDC,KAAK,GAAGF,IAAI,CAACG,KAAL,CAAWD,KAAX,CAAiB,CAAC,EAAlB,EAAsB,EAAtB,CAFZ,EAEuC;;AAEvCE,aAAa,CAACC,MAAd,CAAqB;AACnBC,EAAAA,QAAQ,EAAE,kBAACC,IAAD,EAAU;AAClB,QAAIT,IAAI,GAAGI,KAAK,CAACK,IAAI,CAACC,WAAL,KAAqB,GAAtB,CAAhB;;AACA,QAAIC,IAAI,CAACC,GAAL,CAASZ,IAAT,IAAiBW,IAAI,CAACC,GAAL,CAASb,KAAK,CAACC,IAAf,CAArB,EAA2C;AACzCD,MAAAA,KAAK,CAACC,IAAN,GAAaA,IAAb;AACAE,MAAAA,IAAI,CAACW,EAAL,CAAQd,KAAR,EAAe;AACbC,QAAAA,IAAI,EAAE,CADO;AAEbc,QAAAA,QAAQ,EAAE,GAFG;AAGbC,QAAAA,IAAI,EAAE,QAHO;AAIbC,QAAAA,SAAS,EAAE,IAJE;AAKbR,QAAAA,QAAQ,EAAE;AAAA,iBAAMP,UAAU,CAACF,KAAK,CAACC,IAAP,CAAhB;AAAA;AALG,OAAf;AAOD;AACF;AAbkB,CAArB;AAgBAE,IAAI,CAACe,GAAL,CAAS,OAAT,EAAkB;AAACC,EAAAA,eAAe,EAAE,aAAlB;AAAiCC,EAAAA,OAAO,EAAE;AAA1C,CAAlB,GAGA;;AACA,IAAMnB,IAAI,GAAGoB,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAb;AACA,IAAIC,YAAY,GAAGC,MAAM,CAACC,WAA1B;;AAEA,IAAMC,MAAM,GAAG,SAATA,MAAS,GAAW;AACxB,MAAMC,QAAQ,GAAGH,MAAM,CAACC,WAAxB;AACD,MAAMG,IAAI,GAAGD,QAAQ,GAAGJ,YAAxB;AACA,MAAMM,KAAK,GAAGD,IAAI,GAAG,IAArB;AAEA,MAAME,KAAK,GAAID,KAAK,GAAG,CAAT,GAAc,CAAd,GAAkBA,KAAhC;AAEA5B,EAAAA,IAAI,CAAC8B,KAAL,CAAWC,SAAX,GAAuB,WAAUF,KAAV,GAAiB,MAAxC;AAEAP,EAAAA,YAAY,GAAGI,QAAf;AAGAM,EAAAA,qBAAqB,CAACP,MAAD,CAArB;AACA,CAbD;;AAgBAA,MAAM","file":"skew.ba7ff91e.js","sourceRoot":"..","sourcesContent":["let proxy = { skew: 0 },\r\n    skewSetter = gsap.quickSetter(\"#skew\", \"skewY\", \"deg\"), // fast\r\n    clamp = gsap.utils.clamp(-20, 20); // don't let the skew go beyond 20 degrees. \r\n\r\nScrollTrigger.create({\r\n  onUpdate: (self) => {\r\n    let skew = clamp(self.getVelocity() / 300);\r\n    if (Math.abs(skew) > Math.abs(proxy.skew)) {\r\n      proxy.skew = skew;\r\n      gsap.to(proxy, {\r\n        skew: 0,\r\n        duration: 0.8,\r\n        ease: \"power3\",\r\n        overwrite: true,\r\n        onUpdate: () => skewSetter(proxy.skew)\r\n      });\r\n    }\r\n  }\r\n});\r\n\r\ngsap.set(\"#skew\", {transformOrigin: \"left center\", force3D: true});\r\n\r\n\r\n// Last skew\r\nconst skew = document.querySelector('.skew');\r\nlet currentPixel = window.pageYOffset;\r\n\r\nconst looper = function() {\r\n  const newPixel = window.pageYOffset\r\n\tconst diff = newPixel - currentPixel\r\n\tconst speed = diff * 0.25\r\n\r\n\tconst final = (speed > 3) ? 3 : speed;\r\n\r\n\tskew.style.transform = \"skewY(\"+ final +\"deg)\"\r\n\r\n\tcurrentPixel = newPixel\r\n\r\n\r\n\trequestAnimationFrame(looper)\r\n}\r\n\r\n\r\nlooper()"]}